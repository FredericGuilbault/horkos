<html>
<head>
<title>My vote should count</title>
</head>
<body>
<a name="top"></a>

{% if error == true %} 
<h1>How many votes will the {{summary.jurisdictionName}} election waste this time?</h1><table>
{% else %}
<h1>{{summary.totalWastedVotes}} unrepresented votes (so far) in {{summary.electionName}} election</h1><table>
{% endif %}


<tr><td bgcolor="#00AAB4" border="1"><a href="http://www.fairvote.ca"><img src="http://campaign2015.fairvote.ca/wp-content/themes/fairvotecanada/images/structure/unfair.png"></a></td>


<td>Hello,


<p>My name is <a href="https://www.linkedin.com/in/julienlamarche">Julien Lamarche</a>.  I am a volunteer for <a href="http://www.fairvote.ca">Fair Vote Canada</a>, an organization that does 
public education and lobbying to change the voting system so that more votes count.</p>

<p>This site was to compile wasted votes on live elections night.  Unfortunately, Elections Canada has gone to great lengths to make it hard for site scrappers to work.  So much for open data on voting resutls.  Below is the results from previous by-elections.</p>
</td></tr></table>

<!-- Riding table -->
{% if error != true %}
<a name="data"></a>
<p><table width="100%" border="1">
<tr><th>Share</th><th>Riding name</th><th>Unrepresented votes %</th><th>Unrepresented votes</th><th>Participation rate % (so far) </th></tr>

{% for riding in ridings %}
	<tr>
		<td><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://www.myvoteshouldcount.ca" data-text="{{riding.unrepresentedVotes}} wasted votes in {{riding.name | title}} {{summary.tweetHandle}}" data-related="FairVoteCanada" data-count="none" data-hashtags="wastedvotes,fairvote" data-dnt="true">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></td>
		<td><a href="{{riding.source}}">{{riding.name}}</a></td>
		<td>{{"%.2f %%" | format(safe_divide(riding.unrepresentedVotes , riding.validVotes) * 100)}}</td>
		<td>{{riding.unrepresentedVotes}}</td>
		<td>{{"%.2f %%" | format(riding.participationRate * 100)}} <!-- {{riding.allRidingVotes}} / {{riding.eligibleVoters}} --> </td>
	</tr>
{% endfor %}

<tr style="font-weight: bold;">
		<td><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://www.myvoteshouldcount.ca" data-text="{{jurisdiction.wasted}} wasted votes in {{summary.jurisdictionName | title}} {{summary.tweetHandle}}" data-related="FairVoteCanada" data-count="none" data-hashtags="wastedvotes,fairvote" data-dnt="true">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></td>
	<td>{{summary.jurisdictionName}}</td>
	<td>{{"%.2f %%" | format(safe_divide(jurisdiction.wasted , jurisdiction.valid) * 100)}}</td>
	<td>{{jurisdiction.wasted}}</td>
	<td>{{"%.2f %%" | format(safe_divide(jurisdiction.all , jurisdiction.eligible) * 100)}}</td>
</tr>

</table></p>


<p><a name="byParty"><b>Unrepresented votes by party:</b></a>
<table border="1">
<tr><th>Party initials</th><th>Effective votes</th><th>Wasted votes</th><th>Total votes</th><th>Wasted votes %</th><th>Seats per {{magnitude}} votes</tr>
{% for party, partyData in partyTally %}

<tr>
<td>{{party}}</td>
<td align="right">{{partyData.effective}}</td>
<td align="right">{{partyData.wasted}}</td>
<td align="right">{{partyData.valid}}</td>
<td align="right">{{"%.2f %%" | format(safe_divide(partyData.wasted , partyData.valid) * 100)}}</td>
<td align="right">{{"%.1f" | format(safe_divide(partyData.leading , safe_divide(partyData.valid, magnitude)))}}</td>

</tr>


{% endfor %}
</table>
</p><a href="#top">Top</a>

{% endif %}

<hr />

<p><font size="-1">Results as of {{ "now"|date("Y-m-d H:i:s T") }}</font></p>
<p><font size="-1">Code available on <a href="{{summary.gitHubSource}}">Github</a></font></p>
</body>
</html>
